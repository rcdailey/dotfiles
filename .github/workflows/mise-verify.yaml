name: Verify Mise Tools

on:
  pull_request:
    branches: [main]
    paths:
      - home/dot_config/mise/config.toml

jobs:
  mise-install:
    name: Install
    runs-on: ubuntu-latest
    env:
      MISE_EXPERIMENTAL: 1
      MISE_YES: 1
    steps:
      - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2

      - uses: jdx/mise-action@6d1e696aa24c1aa1bcc1adea0212707c71ab78a8 # v3.6.1
        with:
          install: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Install all tools
        run: mise install --config home/dot_config/mise/config.toml --jobs 4
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Verify tools are functional
        run: |
          mise list --config home/dot_config/mise/config.toml
          echo "All tools installed successfully"
