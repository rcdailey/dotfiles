# Platform-specific configurations consolidated using chezmoi templating

{{ if eq .chezmoi.os "darwin" }}
####################################################################
# macOS-specific configurations
####################################################################

# rbw SSH Agent (directories crate uses DARWIN_USER_TEMP_DIR, not XDG)
export SSH_AUTH_SOCK="$(getconf DARWIN_USER_TEMP_DIR)rbw-$(id -u)/ssh-agent-socket"

# Enable color support
export CLICOLOR=1
export LSCOLORS=ExFxBxDxCxegedabagacad

# Homebrew initialization (already handled in .zprofile via HOMEBREW_PREFIX)
export PATH="/opt/homebrew/opt/python/libexec/bin:$PATH"

# Docker configuration for specific projects
export DOCKER_DATA_PATH="/Volumes/docker"
{{ end }}

{{ if eq .chezmoi.os "linux" }}
####################################################################
# Linux-specific configurations
####################################################################

# rbw SSH Agent
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/rbw/ssh-agent-socket"

# Enable color support for ls
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
fi

# Homebrew initialization (already handled in .zprofile via HOMEBREW_PREFIX)


# This is to support the migration to k8s in the nezuko repository
export DOCKER_DATA_PATH="/mnt/docker-data"

{{ end }}

{{ if eq .chezmoi.os "windows" }}
####################################################################
# Windows-specific configurations
####################################################################

# Prepend Chocolatey bin to PATH to prioritize it over Git for Windows tools
export PATH="$HOME/AppData/Local/UniGetUI/Chocolatey/bin:$PATH"

# Node.js platform check bypass for Windows environments
export NODE_SKIP_PLATFORM_CHECK=1

{{ end }}
####################################################################
