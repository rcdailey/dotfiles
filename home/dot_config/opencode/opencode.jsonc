{
  "$schema": "https://opencode.ai/config.json",
  "autoupdate": false,
  "share": "manual",
  "compaction": { "auto": false },
  "model": "anthropic/claude-opus-4-6",
  "agent": {
    "general": {
      "model": "anthropic/claude-sonnet-4-6",
      "variant": "high",
      "tools": { "question": false }
    },
    "explore": {
      "model": "anthropic/claude-haiku-4-5",
      "tools": { "question": false }
    }
  },
  "formatter": {
    "shfmt": { "disabled": true },
    "markdownlint-cli2": {
      "command": ["markdownlint-cli2", "--fix", "$FILE"],
      "extensions": [".md"]
    }
  },
  "plugin": [
    "@plannotator/opencode@latest",
    "opencode-anthropic-auth@latest",
    // "@franlol/opencode-md-table-formatter@latest",
    // "@tarquinen/opencode-dcp@latest" // super bad to use this with anthropic -- causes $$$
  ],
  "mcp": {
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp/oauth"
    },
    "searxng": {
      "type": "local",
      "command": ["npx", "-y", "mcp-searxng"],
      "environment": {
        "SEARXNG_URL": "https://search.dailey.app"
      }
    }
  },
  "permission": {
    "*": "allow",
    "grep": "deny", // require ripgrep instead

    // searxng replaces websearch only; webfetch is built-in
    "websearch": "deny",
    "*_web_url_read": "deny",

    // octocode MCP
    "*_packageSearch": "deny",

    "bash": {
      "*": "allow",
      // grep redirection handled by tool-guards plugin (allows kubectl exec, git, etc)

      // git (destructive)
      "*git push*": "ask",
      "*git reset --hard*": "ask",
      "*git clean*": "ask",
      "*git branch -D*": "ask",
      "*git stash drop*": "ask",
      "*git stash clear*": "ask",
      // "git commit*": "ask",
      // "git add*": "ask",

      // file operations
      "rm -r*": "ask",

      // system
      "sudo*": "ask",
      "kill*": "ask",
      "pkill*": "ask",
      "shutdown*": "ask",
      "reboot*": "ask",

      // github cli
      // '*' at start catches corner cases like `xargs -I{} gh api ...`
      "*gh pr create*": "ask",
      "*gh pr merge*": "ask",
      "*gh pr close*": "ask",
      "*gh pr reopen*": "ask",
      "*gh pr comment*": "ask",
      "*gh pr edit*": "ask",
      "*gh pr review*": "ask",
      "*gh pr ready*": "ask",
      "*gh issue create*": "ask",
      "*gh issue close*": "ask",
      "*gh issue reopen*": "ask",
      "*gh issue delete*": "ask",
      "*gh issue edit*": "ask",
      "*gh issue comment*": "ask",
      "*gh issue transfer*": "ask",
      "*gh release create*": "ask",
      "*gh release delete*": "ask",
      "*gh release edit*": "ask",
      "*gh release upload*": "ask",
      "*gh repo create*": "ask",
      "*gh repo delete*": "ask",
      "*gh repo fork*": "ask",
      "*gh repo archive*": "ask",
      "*gh repo rename*": "ask",
      "*gh repo edit*": "ask",
      "*gh workflow run*": "ask",
      "*gh run cancel*": "ask",
      "*gh run rerun*": "ask",
      "*gh label create*": "ask",
      "*gh label delete*": "ask",
      "*gh secret set*": "ask",
      "*gh secret delete*": "ask",
      "*gh variable set*": "ask",
      "*gh variable delete*": "ask",
      "*gh api* --method POST*": "ask",
      "*gh api* --method PUT*": "ask",
      "*gh api* --method PATCH*": "ask",
      "*gh api* --method DELETE*": "ask",
      "*gh api* -X POST*": "ask",
      "*gh api* -X PUT*": "ask",
      "*gh api* -X PATCH*": "ask",
      "*gh api* -X DELETE*": "ask",
      // gh api implies POST when data flags are present without explicit method
      "*gh api* -f *": "ask",
      "*gh api* -F *": "ask",
      "*gh api* --field *": "ask",
      "*gh api* --raw-field *": "ask",
      "*gh api* --input *": "ask",

    },
    "read": {
      "*": "allow"
    }
  },
}
